<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
    <HEAD>
        <META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
        <TITLE>Simple Demonstration of how WebGazer.js works</TITLE>
    </HEAD>
    <BODY LANG="en-US" LINK="#0000ff" DIR="LTR">
    

<style>
p {
    text-align:center;
    
    
}
.b1 {
    position:absolute;
    transition: .5s ease;
    top: 0%;
    left: 0%;
    height:330px;
    width:480px;
    background-color: #ea4c88;
  color: #eee;
  font-weight: bold;
  margin-bottom: 2em;
  text-transform: uppercase;
}
.b2 {
    position:absolute;
    transition: .5s ease;
    top: 50%;
    left: 0%;
    height:330px;
    width:480px;
    background-color: #ea4c88;
  color: #eee;
  font-weight: bold;
  margin-bottom: 2em;
  text-transform: uppercase;
}
.b3 {
    position:absolute;
    transition: .5s ease;
    top: 0%;
    left: 62.5%;
    height:330px;
    width:480px;
    background-color: #ea4c88;
  color: #eee;
  font-weight: bold;
  margin-bottom: 2em;
  text-transform: uppercase;
}
.b4 {
    position:absolute;
    transition: .5s ease;
    top: 50%;
    left: 62.5%;
    height:330px;
    width:480px;
    background-color: #ea4c88;
  color: #eee;
  font-weight: bold;
  margin-bottom: 2em;
  text-transform: uppercase;
}
</style>
        <script src="build/webgazer.js"></script>
        <script>

var z=0;
var button=0;
var gad=0;
var cnt=0;
var act=0;
var at=0;
window.setInterval(function(){
   var w = window,
    d = document,
    e = d.documentElement,
    g = d.getElementsByTagName('body')[0],
    x = w.innerWidth || e.clientWidth || g.clientWidth,
    y = w.innerHeight|| e.clientHeight|| g.clientHeight;
	
    var cur = webgazer.getCurrentPrediction();

        var x_pos  = cur.x;
        var y_pos  = cur.y;
        if(act==0)
        {
        	if(y_pos>369)
        		if(x_pos> 600)
        		{
        			at++;
        			if(at>=2) act=1;
        			
        		}		
        	var property = document.getElementById("b4");
        	document.getElementById("b4").value="ACTIVATE";
        	property.style.backgroundColor = "#ff0000";
        	
        	button=0;	
        }
        else if(button==0){
        		at=0;	
			var pro= document.getElementById("b1");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b2");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b3");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b4");
			pro.style.backgroundColor = "#ea4c88";
			document.getElementById("b4").value="DEACTIVATE";
		if(y_pos<369)
		{
			
			if(x_pos< x/2-160)
			{
				if(z==1)
				{
					var property = document.getElementById("b1");
					//property.style.backgroundColor = "#ff0000";
					document.getElementById("b1").value="FACEB0OK";
					document.getElementById("b2").value="TWITTER";
					document.getElementById("b3").value="INSTAGRAM";
					document.getElementById("b4").value="CRICBUZZ";
					
					button=1;
				}
				else{
					button=0;	
					z=1;
				}
			}
			else if(x_pos> x/2+160) {
				if(z==3)
				{
					var property = document.getElementById("b3");
					document.getElementById("b1").value="CODECHEF";
					document.getElementById("b2").value="GEEKSFORGEEKS";
					document.getElementById("b3").value="CODEFORCES";
					document.getElementById("b4").value="CODECHEF";
					//property.style.backgroundColor = "#ff0000";
					button=2;
				}
				else{
					button=0;	
					z=3;
				}
			}
			else{
				button=0;	
				z=0;
			}
		
		
		}
		else{
			if(x_pos< 480)
			{
				if(z==2)
				{
					var property = document.getElementById("b2");
					document.getElementById("b1").value="GOOGLE";
					document.getElementById("b2").value="GMAIL";
					document.getElementById("b3").value="HANGOUTS";
					document.getElementById("b4").value="DRIVE";
					//property.style.backgroundColor = "#ff0000";
					button=3;
				}
				else{
					button=0;	
					z=2;
				}
			}
			else if(x_pos> 800) {
				if(z==4)
				{
					var property = document.getElementById("b4");
					act=0;
					property.style.backgroundColor = "#ff0000";
					document.getElementById("b4").value="ACTIVATE";
					button=4;
				}
				else{
					button=0;	
					z=4;
				}
			}
			else{
					button=0;	
					z=0;
				}
		}
	}
	else if(gad==0)
	{
			var pro= document.getElementById("b1");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b2");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b3");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b4");
			pro.style.backgroundColor = "#ea4c88";
		if(y_pos<369)
		{
			
			if(x_pos< x/2-160)
			{
				if(z==1)
				{
					var property = document.getElementById("b1");
					property.style.backgroundColor = "#ff0000";
					gad=1;
					if(button==1)window.open('http://facebook.com');
					else window.open('http://google.com');
					document.getElementById("b1").value="SOCIAL MEDIA";
					document.getElementById("b2").value="GOOGLE PRODUCTS";
					document.getElementById("b3").value="CODING";
					document.getElementById("b4").value="DEACTIVATE";
										button=0;
				}
				else{
					gad=0;	
					z=1;
				}
			}
			else if(x_pos> x/2+160) {
				if(z==3)
				{
					var property = document.getElementById("b3");
					property.style.backgroundColor = "#ff0000";
					gad=2;
					if(button==1)window.open('http://instagram.com');
					else window.open('http://google.com');
					document.getElementById("b1").value="SOCIAL MEDIA";
					document.getElementById("b2").value="GOOGLE PRODUCTS";
					document.getElementById("b3").value="CODING";
					document.getElementById("b4").value="DEACTIVATE";
										button=0;
				}
				else{
					gad=0;	
					z=3;
				}
			}
			else{
				gad=0;	
				z=0;
			}
		
		
		}
		else{
			if(x_pos< 480)
			{
				if(z==2)
				{
					var property = document.getElementById("b2");
					property.style.backgroundColor = "#ff0000";
					if(button==1)window.open('http://twitter.com');
					else window.open('http://google.com');
					gad=3;
					document.getElementById("b1").value="SOCIAL MEDIA";
					document.getElementById("b2").value="GOOGLE PRODUCTS";
					document.getElementById("b3").value="CODING";
					document.getElementById("b4").value="DEACTIVATE";
										button=0;
				}
				else{
					gad=0;	
					z=2;
				}
			}
			else if(x_pos> 800) {
				if(z==4)
				{
					var property = document.getElementById("b4");
					//document.getElementById("b1").value="BULB";
					property.style.backgroundColor = "#ff0000";
					if(button==1)window.open('http://cricbuzz.com');
					else window.open('http://google.com');
					button=0;
					gad=4;
				}
				else{
					gad=0;	
					z=4;
				}
			}
			else{
					gad=0;	
					z=0;
				}
		}
	}
	else
	{
		
				if(cnt==2){
					if(button==1)
					{
						if(gad==1)
							window.open('http://facebook.com');
						else if(gad==3)
							window.open('http://instagram.com');
						else if(gad==2)
							window.open('http://twitter.com');
						else 	window.open('http://cricbuzz.com');
					}
					else if(button==2)
					{
						window.open('http://facebook.com');
					}
			 		button=0;
			 	}
			 	else cnt++;
			
			document.getElementById("b1").value="SOCIAL MEDIA";
					document.getElementById("b2").value="GOOGLE PRODUCTS";
					document.getElementById("b3").value="CODING";
					document.getElementById("b4").value="DEACTIVATE";
			button=0;
			gad=0;
			var pro= document.getElementById("b1");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b2");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b3");
			pro.style.backgroundColor = "#ea4c88";
			var pro= document.getElementById("b4");
			pro.style.backgroundColor = "#ea4c88";
	}
        
}, 2000);


window.onload = function() {
	var property = document.getElementById("b4");
        	document.getElementById("b4").value="ACTIVATE";
        	property.style.backgroundColor = "#ff0000";
    webgazer.setRegression('ridge') /* currently must set regression and tracker */
        .setTracker('clmtrackr')
        .setGazeListener(function(data, clock) {
         //   console.log(data); /* data is an object containing an x and y key which are the x and y prediction coordinates (no bounds limiting) */
         //   console.log(clock); /* elapsed time in milliseconds since webgazer.begin() was called */
        })
        .begin()
        .showPredictionPoints(true); /* shows a square every 100 milliseconds where current prediction is */
    var w = window,
    d = document,
    e = d.documentElement,
    g = d.getElementsByTagName('body')[0],
    x = w.innerWidth || e.clientWidth || g.clientWidth,
    y = w.innerHeight|| e.clientHeight|| g.clientHeight;
    var width = 320;
    var height = 240;
    var topDist = "'"+(y/2)-100+"px'";
    var leftDist = "'"+(x/2)-120+"px'";
    
    var setup = function() {
        var video = document.getElementById('webgazerVideoFeed');
        video.style.display = 'block';
        video.style.position = 'absolute';
        video.style.top = '200px';
        video.style.left = '483px';
        video.width = width;
        video.height = height;
        video.style.margin = '0px';

        webgazer.params.imgWidth = width;
        webgazer.params.imgHeight = height;

        var overlay = document.createElement('canvas');
        overlay.id = 'overlay';
        overlay.style.position = 'absolute';
        overlay.width = width;
        overlay.height = height;
        overlay.style.top = '200px';
        overlay.style.left = '483px';
        overlay.style.margin = '0px';

        document.body.appendChild(overlay);

        var cl = webgazer.getTracker().clm;

        function drawLoop() {
            requestAnimFrame(drawLoop);
            overlay.getContext('2d').clearRect(0,0,width,height);
            if (cl.getCurrentPosition()) {
                cl.draw(overlay);
            }
                   

        }
        drawLoop();
    };

    function checkIfReady() {
        if (webgazer.isReady()) {
            setup();
        } else {
            setTimeout(checkIfReady, 100);
        }
    }
    setTimeout(checkIfReady,100);
};


window.onbeforeunload = function() {
    //webgazer.end(); //Uncomment if you want to save the data even if you reload the page.
    window.localStorage.clear(); //Comment out if you want to save data across different sessions 
}
        </script>
	<div id="mydiv">
        <h1 style="color:#C0C0C0" align="right">
            
		
        </h1>
	<form  name="form1" >
	<p><input id ="b1" type="submit" onclick="return false" class="b1" value="SOCIAL MEDIA" name="Button1" /></p>
	<p><input id ="b2" type="submit" onclick="return false" class="b2" value="GOOGLE PRODUCTS" name="Button2" /></p>
	<p><input id ="b3"  type="submit" onclick="return false" class="b3" value="CODING" name="Button3" /></p>
	<p><input id ="b4"  type="submit" onclick="return false"  class="b4" value="ACTIVATE" name="Button4" /></p>
	</form>
	
    </div>
     
    </BODY>
</HTML>
